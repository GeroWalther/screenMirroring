<!doctype html>
<html class="h-full">
  <head>
    <meta charset="UTF-8" />
    <title>Screen Mirror - Settings</title>
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline'; connect-src 'self' ws: wss:;" />
    <link rel="stylesheet" href="index.css" />
  </head>
  <body class="h-full bg-dark-primary text-dark-text font-sans">
    <div class="h-full flex flex-col">
      <!-- Header -->
      <header class="bg-dark-secondary px-6 py-4 border-b border-dark-accent">
        <h1 class="text-xl font-semibold">ğŸ“± Screen Mirror Settings</h1>
        <p class="text-sm text-dark-text-secondary mt-1">
          Configure your screen mirroring preferences
        </p>
      </header>

      <!-- Main Content -->
      <main class="flex-1 p-6 max-w-4xl mx-auto w-full">
        <!-- Connection Status -->
        <div
          class="bg-dark-secondary rounded-lg p-6 border border-dark-accent mb-6">
          <div class="flex items-center justify-between">
            <div>
              <h2 class="text-lg font-medium mb-2">Connection Status</h2>
              <div class="flex items-center gap-2">
                <span class="status-dot" id="status-dot"></span>
                <span class="text-sm text-dark-text-secondary" id="status-text"
                  >Use system tray to connect</span
                >
              </div>
            </div>
            <div class="text-right text-sm text-dark-text-secondary">
              <p>Click the ğŸ“± icon in your system tray</p>
              <p>to connect to available TVs</p>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- Quality Settings -->
          <div
            class="bg-dark-secondary rounded-lg p-6 border border-dark-accent">
            <h2 class="text-lg font-medium mb-6">Quality Presets</h2>

            <div class="space-y-3 mb-6">
              <button class="preset-btn w-full text-left" data-preset="cinema">
                ğŸ¬ Cinema (1080p30) - Best Quality
              </button>
              <button class="preset-btn w-full text-left" data-preset="smooth">
                ğŸ® Smooth (720p60) - Gaming
              </button>
              <button class="preset-btn w-full text-left" data-preset="battery">
                ğŸ”‹ Battery Saver (900p30) - Efficient
              </button>
            </div>

            <!-- Custom Settings -->
            <div class="border-t border-dark-accent pt-6">
              <h3 class="text-sm font-medium text-dark-text-secondary mb-4">
                Custom Settings
              </h3>

              <div class="space-y-4">
                <div>
                  <label
                    for="bitrate-slider"
                    class="block mb-2 text-sm text-dark-text-secondary">
                    Max Bitrate:
                    <span id="bitrate-value" class="text-blue-400 font-medium"
                      >6</span
                    >
                    Mbps
                  </label>
                  <input
                    type="range"
                    id="bitrate-slider"
                    min="1"
                    max="20"
                    value="6"
                    step="1" />
                </div>

                <div>
                  <label
                    for="framerate-slider"
                    class="block mb-2 text-sm text-dark-text-secondary">
                    Frame Rate:
                    <span id="framerate-value" class="text-blue-400 font-medium"
                      >30</span
                    >
                    fps
                  </label>
                  <input
                    type="range"
                    id="framerate-slider"
                    min="15"
                    max="60"
                    value="30"
                    step="15" />
                </div>
              </div>
            </div>
          </div>

          <!-- TV Discovery -->
          <div
            class="bg-dark-secondary rounded-lg p-6 border border-dark-accent">
            <h2 class="text-lg font-medium mb-6">TV Discovery</h2>

            <div class="space-y-4">
              <div>
                <label
                  for="server-input"
                  class="block mb-2 text-sm text-dark-text-secondary"
                  >Signaling Server:</label
                >
                <input
                  type="text"
                  id="server-input"
                  class="input-field"
                  placeholder="ws://192.168.1.100:8080"
                  value="ws://localhost:8080" />
              </div>

              <button id="discover-btn" class="btn btn-primary w-full">
                ğŸ” Discover TVs
              </button>

              <div class="border-t border-dark-accent pt-4">
                <h3 class="text-sm font-medium text-dark-text-secondary mb-3">
                  Available TVs:
                </h3>
                <div
                  id="tv-list"
                  class="space-y-2 text-sm text-dark-text-secondary">
                  <div
                    class="flex justify-between items-center py-2 border-b border-dark-accent">
                    <span>ğŸ“º Living Room TV</span>
                    <span class="text-xs">192.168.1.100</span>
                  </div>
                  <div
                    class="flex justify-between items-center py-2 border-b border-dark-accent">
                    <span>ğŸ“º Bedroom TV</span>
                    <span class="text-xs">192.168.1.101</span>
                  </div>
                  <div class="flex justify-between items-center py-2">
                    <span>ğŸ“º Kitchen TV</span>
                    <span class="text-xs">192.168.1.102</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Stats Section (only shown when streaming) -->
        <div
          class="bg-dark-secondary rounded-lg p-6 border border-dark-accent mt-6 hidden"
          id="stats-section">
          <h2 class="text-lg font-medium mb-6">Connection Stats</h2>

          <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
            <div class="text-center">
              <div class="text-2xl font-bold text-blue-400" id="stat-bitrate">
                -
              </div>
              <div class="text-sm text-dark-text-secondary">Bitrate</div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-blue-400" id="stat-framerate">
                -
              </div>
              <div class="text-sm text-dark-text-secondary">Frame Rate</div>
            </div>
            <div class="text-center">
              <div
                class="text-2xl font-bold text-blue-400"
                id="stat-packetloss">
                -
              </div>
              <div class="text-sm text-dark-text-secondary">Packet Loss</div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-blue-400" id="stat-rtt">
                -
              </div>
              <div class="text-sm text-dark-text-secondary">RTT</div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script type="module" src="./settings.js"></script>
  </body>
</html>
